{% load staticfiles %}

<!doctype html>
<html lang="en">
<head>
  {% csrf_token %}
  <meta charset="utf-8">

  <title>Hat Party</title>
  <meta name="description" content="Hat Party">
  <meta name="author" content="503 Grove">
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>

<body>

  <nav class="navbar navbar-fixed-top navbar-dark bg-inverse">
    <a class="navbar-brand" href="#">Hat Party</a>
    <ul class="nav navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#">See the Hats! <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">WTF?</a>
      </li>
    </ul>
  </nav>

  <div class="container">

    <div class="hat-header">
      <h1>This is a Hat Party.</h1>
      <p class="lead">Something is going on... {{ total_counter }}</p>
    </div>

    <div class="hats-container row">
    <h2>Hats</h2>
    {% for hat in hats %}
    <div id="hat-container-{{hat.id}}" class="col-md-6">
      <h4>{{ hat.name }}</h4>
      <p>{{ hat.description }}</p>
      {% if hat.current_wearer %}
      <p>Worn by <a href="#">{{ hat.current_wearer.name }}</a></p>
      <a href="javascript:likeHat('{{hat.id}}');">Like (<span data-hat-id="{{hat.id}}">{{hat.current_likes.count}}</span>)</a> |
      <a href="javascript:slapUser('{{hat.current_wearer.id}}');">Slap (<span class="slap-counter" data-user-id="{{hat.current_wearer.id}}">{{hat.current_wearer.current_slaps.count}}</span>)</a> |
      <a href="#">Steal (<span data-hat-id="{{hat.id}}">{{hat.transfers.count}}</span>)</a>
      <a href="javascript:ditchHat('{{hat.id}}');">Take off this Hat.</a>
      {% else %}
      <a href="javascript:claimHat('{{hat.id}}');">Wear this Hat.</a>
      {% endif %}
    </div>
    {% endfor %}
    </div>

    <br/>
    <div class="users-container row">
    <h2>People</h2>
    {% for user in users %}
    <div id="user-container-{{user.id}}" class="col-md-6">
      <h4><a href="mailto:{{user.email}}">{{ user.name }}</a></h4>
      <a href="javascript:slapUser('{{user.id}}');">Slap (<span class="slap-counter" data-user-id="{{user.id}}">{{user.current_slaps.count}}</span>)</a>
    </div>
    {% endfor %}
    </div>

  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script>
  <script src="{% static 'js/bootstrap.min.js' %}"></script>
  <script src="{% static 'js/hatparty.js' %}"></script>
</body>
</html>